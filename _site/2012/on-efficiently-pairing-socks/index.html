<!DOCTYPE html>
<html>
<meta charset="utf-8">
<title>46bit</title>
<script src="//use.typekit.net/uaf2fos.js"></script>
<script>try{Typekit.load();}catch(e){}</script>

<link rel="stylesheet" href="/css/master.css">
<link rel="alternate" type="application/atom+xml" href="/meta/feed.atom">
<body>
	<div class="wrapper">
		<header class="head">
			<h1><a href="/">46bit</a> by Michael Mokrysz</h1>
			<nav class="sitenav">
				<ul>
					<li><a href="/">Weblog</a></li>
					<li><a href="/about">About</a></li>
				</ul>
			</nav>
		</header>
		<div class="pagecontent">
			<article>
	<header>
		<h1><a href="/2012/on-efficiently-pairing-socks">On efficiently pairing socks</a></h1>
		<span class="date">May  1, 2012</span>
		
			<!--<span class="tags">Math</span>-->
		
	</header>
	<div class="extended"><p>Anyone who has done an appreciable amount of laundry has probably noticed the time commonly taken matching up socks of different styles and colours.</p>
<p>My efforts to optimise the process have led me to the curious practice of un-matching: making pairs of socks so as to deliberately <strong>not</strong> be a matching pair. It’s much faster, much simpler to compute and yet because there is a process behind it you have a defence against allegations of laziness. <!--more--></p>
<div class="figure">
<img src="/img/different-coloured-socks.jpg" />
</div>
<p>If you consider the normal process of matching socks, a sock is picked from the top of the pile, then the pile is traversed to find a matching sock (a <a href="http://en.wikipedia.org/wiki/Linear_search">Linear search</a>). As such, we’re discussing a horribly brute-forced example of the <a href="http://en.wikipedia.org/wiki/Stable_roommates_problem">stable roommates problem</a>.</p>
<p>Optimisations to the matching algorithm were <a href="http://www.mail-archive.com/kragen-tol@canonical.org/msg00084.html">discussed back in 2003</a>:</p>
<blockquote>
<pre><code>&lt;p&gt;&quot;I maintain an &quot;unpaired sock buffer&quot;, usually on my leg, which is initially empty. Then, for each sock in the sequence, I do a sequential search through this buffer for its mate. If I find the mate, I remove it from the buffer and form a pair; if I do not, I add the new sock to the buffer &amp;hellip;&lt;/p&gt;
&lt;p&gt;The worst case for this problem is to compare every sock against every other sock. The worst case for the naive sock-buffer method isn't that bad; it happens when the sock sequence is palindromic. Here, you need only compare to half the other socks at most, and a quarter of them on average, which is four times better than the worst case.&quot;&lt;/p&gt;
&lt;p&gt;&amp;mdash; &lt;cite&gt;[On the complexity of sock-matching](http://www.mail-archive.com/kragen-tol@canonical.org/msg00084.html) by Kragen Sitaker&lt;/cite&gt;&lt;/p&gt;</code></pre>
</blockquote>
<p>My concept of unmatching provides for a major speed boost to this process. Whereas previously two given socks might have had a 20% chance of being a valid pair, that now becomes a 80% chance. Providing that there is no major bias towards a given style of sock, this provides a massive speedup. The worst case may in fact be the best case for ordinary matching: when every sock is next to a matching sock in the pile.</p>
<p><em>With luck, nobody will ever again ask why my socks don’t match.</em></p></div>
</article>

		</div>
	</div>
	<script>
	  // Tracking
	  if (document.location.hostname != "localhost") {
	    // GoSquared
	    var GoSquared = {};
	    GoSquared.acct = "GSN-207291-Q";
	    (function(w){
	      function gs(){
	        w._gstc_lt = +new Date;
	        var d = document, g = d.createElement("script");
	        g.type = "text/javascript";
	        g.src = "//d1l6p2sc9645hc.cloudfront.net/tracker.js";
	        var s = d.getElementsByTagName("script")[0];
	        s.parentNode.insertBefore(g, s);
	      }
	      w.addEventListener ?
	        w.addEventListener("load", gs, false) :
	        w.attachEvent("onload", gs);
	    })(window);

	    // Google Analytics
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-22921213-1']);
	    _gaq.push(['_trackPageview']);
	    var ga = document.createElement('script');
	    ga.type = 'text/javascript';
	    ga.async = true;
	    ga.src = 'https://ssl.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0];
	    s.parentNode.insertBefore(ga, s);
	  }
	</script>
</body>
</html>
